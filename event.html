<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Деталі події — TribeUp</title>
    
    <link rel="stylesheet" href="/styles/general_styles.css">
    <link rel="stylesheet" href="/styles/header.css">
    <link rel="stylesheet" href="/styles/buttons.css">
    <link rel="stylesheet" href="/styles/cards_and_tags.css">
    <link rel="stylesheet" href="/styles/dark_theme.css">
    <link rel="stylesheet" href="/styles/toast.css">
    <link rel="stylesheet" href="/styles/forms_and_filters.css">
    
    <link rel="stylesheet" href="/styles/event_page.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    
    <div id="header-placeholder"></div>

    <main class="event-page-container container">
        
        <nav class="breadcrumbs">
            <a href="/" class="back-link"><i class="fas fa-arrow-left"></i> На головну</a>
            <span class="separator">/</span>
            <span id="breadcrumbCategory">Категорія</span>
        </nav>

        <div id="eventLoadingState" class="event-loading">
            <div class="skeleton-hero"></div>
            <div class="skeleton-grid">
                <div class="skeleton-main"></div>
                <div class="skeleton-sidebar"></div>
            </div>
        </div>

        <div id="eventContent" class="event-content" style="display: none;">
            
            <div class="event-hero-card">
                <div class="hero-top-row">
                    <span id="eventCategoryBadge" class="category-badge">...</span>
                    <div class="event-status-badge" id="eventStatusBadge">
                        <span class="status-dot"></span> <span id="eventStatusText">Активна</span>
                    </div>
                    <div class="creator-controls" id="creatorControls" style="display: none;">
                        <button class="icon-btn" id="editEventBtn" title="Редагувати"><i class="fas fa-edit"></i></button>
                        <button class="icon-btn delete" id="deleteEventBtn" title="Видалити"><i class="fas fa-trash-alt"></i></button>
                    </div>
                </div>

                <h1 id="pageEventTitle" class="event-title">...</h1>

                <div class="hero-meta-grid">
                    <div class="meta-item">
                        <div class="icon-box"><i class="fas fa-calendar-day"></i></div>
                        <div>
                            <div class="meta-label">Дата та час</div>
                            <div class="meta-value" id="pageEventDate">...</div>
                        </div>
                    </div>
                    <div class="meta-item">
                        <div class="icon-box"><i class="fas fa-map-marker-alt"></i></div>
                        <div>
                            <div class="meta-label">Локація</div>
                            <div class="meta-value" id="pageEventLocationText">...</div>
                        </div>
                    </div>
                    <div class="meta-item">
                        <div class="icon-box"><i class="fas fa-user-friends"></i></div>
                        <div>
                            <div class="meta-label">Учасники</div>
                            <div class="meta-value"><span id="pageParticipantsCount">0</span> / <span id="pageMaxParticipants">0</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="event-layout-grid">
                
                <div class="event-left-col">
                    
                    <section class="content-block">
                        <h3>Про подію</h3>
                        <p id="pageEventDescription" class="event-description-text"></p>
                        
                        <div class="tags-section">
                            <h4>Теги та інтереси:</h4>
                            <div id="pageEventInterests" class="interests"></div>
                        </div>
                    </section>

                    <section class="content-block organizer-block">
                        <h3>Організатор</h3>
                        <div class="organizer-card" id="organizerCard">
                            <img id="organizerAvatar" src="" alt="Organizer">
                            <div class="organizer-info">
                                <h4 id="organizerName">Name</h4>
                                <span id="organizerUsername">@username</span>
                            </div>
                            <button class="btn btn-outline btn-sm" id="organizerProfileBtn">Профіль</button>
                        </div>
                    </section>

                    <section class="content-block chat-widget-block">
                        <div class="widget-header">
                            <h3><i class="fas fa-comments"></i> Обговорення</h3>
                            <span class="live-indicator">LIVE</span>
                        </div>
                        <div id="eventChatWidget" class="chat-widget-area">
                            <div class="chat-placeholder">Приєднуйтесь до події, щоб спілкуватися!</div>
                        </div>
                        <div class="widget-input-area" id="chatWidgetInputArea" style="display: none;">
                            <input type="text" id="eventChatInput" placeholder="Написати повідомлення...">
                            <button id="eventChatSendBtn"><i class="fas fa-paper-plane"></i></button>
                        </div>
                    </section>

                </div>

                <div class="event-right-col">
                    
                    <div class="sidebar-card action-card">
                        <div id="actionArea">
                            </div>
                        <div class="spots-left" id="spotsLeftText">Залишилось місць: 5</div>
                    </div>

                    <div class="sidebar-card map-card">
                        <h4>На мапі</h4>
                        <div id="pageEventMap" class="map-container"></div>
                    </div>

                    <div class="sidebar-card participants-card">
                        <div class="card-header-row">
                            <h4>Хто йде?</h4>
                            </div>
                        <div id="pageParticipantsList" class="participants-grid">
                            </div>
                    </div>

                </div>
            </div>
        </div>
    </main>

    <div class="modal" id="editEventModal">
        <div class="modal-content">
            <button class="modal-close" id="closeEditEventModal">×</button>
            <h2>Редагувати подію</h2>
            <form id="editEventForm">
                <input type="hidden" id="editEventId">
                <div class="form-group"><label class="form-label">Назва</label><input type="text" class="form-control" id="editEventTitle" required></div>
                <div class="form-group"><label class="form-label">Опис</label><textarea class="form-control" id="editEventDescription" rows="4" required></textarea></div>
                <div class="form-group"><label class="form-label">Категорія</label><select class="form-select" id="editEventCategory" required>
                    <option value="sports">Спорт</option><option value="games">Ігри</option><option value="arts">Мистецтво</option><option value="food">Їжа</option><option value="outdoors">Природа</option><option value="learning">Навчання</option><option value="social">Соціальні</option><option value="music">Музика</option><option value="travel">Подорожі</option><option value="boardgames">Настільні ігри</option>
                </select></div>
                <div class="form-group"><label class="form-label">Місце</label><input type="text" class="form-control" id="editEventLocation" required></div>
                <div class="form-group"><label class="form-label">Дата</label><input type="datetime-local" class="form-control" id="editEventDate" required></div>
                <div class="form-group"><label class="form-label">Макс. учасників</label><input type="number" class="form-control" id="editEventParticipants" required></div>
                <div class="form-group"><label class="form-label">Інтереси</label><div class="interests" id="editEventInterestsContainer"></div></div>
                <div class="form-group custom-interest-group"><div class="custom-input-group"><input type="text" class="form-control" id="editEventCustomInterestInput" placeholder="Додати інтерес"><button type="button" class="btn btn-outline" id="addEditEventCustomInterestBtn">Додати</button></div></div>
                <button type="submit" class="btn btn-accent" style="width: 100%; margin-top: 15px;">Зберегти зміни</button>
            </form>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    <script type="module" src="/scripts/pages/event_page.js"></script>
</body>
</html>