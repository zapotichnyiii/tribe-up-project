/* styles/dark_theme.css — ВИПРАВЛЕНИЙ "ЯДЕРНИЙ" ВАРІАНТ */

body.dark-theme {
    /* --- ПАЛІТРА (Глибокий Slate) --- */
    --dt-bg-deep: #020617;       /* Найтемніший фон (сторінка, Hero) */
    --dt-bg-surface: #0f172a;    /* Основний фон карток і блоків */
    --dt-bg-elevated: #1e293b;   /* Фон елементів при наведенні, модалок */
    --dt-bg-input: #0f172a;      /* Фон інпутів */

    --dt-text-primary: #f8fafc;  /* Майже білий текст */
    --dt-text-secondary: #94a3b8; /* Сірий текст для описів */

    --dt-border: #1e293b;        /* Колір рамок */
    --dt-accent: #7c3aed;        /* Основний акцент (фіолетовий) */

    /* Перевизначаємо глобальні змінні */
    --main-background-color: var(--dt-bg-deep) !important;
    --main-card-background: var(--dt-bg-surface) !important;
    --main-dark-color: var(--dt-text-primary) !important;
    --main-secondary-color: var(--dt-text-secondary) !important;
    --auth-input-background: var(--dt-bg-input) !important;

    background-color: var(--dt-bg-deep) !important;
    color: var(--dt-text-primary) !important;
    scrollbar-color: var(--dt-border) var(--dt-bg-deep);
}

/* ==========================================================================
   1. ГЛОБАЛЬНЕ СКИДАННЯ (RESET)
========================================================================== */
body.dark-theme,
body.dark-theme *:not(i) { 
    background-color: transparent !important;
    color: var(--dt-text-primary) !important;
    border-color: var(--dt-border) !important;
    box-shadow: none !important; 
}

/* Фон сторінки */
body.dark-theme {
    background-color: var(--dt-bg-deep) !important;
}

/* ==========================================================================
   2. КОНТЕЙНЕРИ, КАРТКИ, СЕКЦІЇ
========================================================================== */

/* Основні блоки, які мають бути темними (Slate 900) */
body.dark-theme .card,
body.dark-theme .modal-content,
body.dark-theme .filters,
body.dark-theme .people-filter,
body.dark-theme .event-card-horizontal,
body.dark-theme .people-card,
body.dark-theme .mini-event-card,
body.dark-theme .contact-card,
body.dark-theme .form-card,
body.dark-theme .location-card,
body.dark-theme .form-section,
body.dark-theme .auth-container,
body.dark-theme .auth-form-section,
body.dark-theme .process-step,
body.dark-theme .notification-dropdown,
body.dark-theme header,
body.dark-theme footer {
    background-color: var(--dt-bg-surface) !important;
    border: 1px solid var(--dt-border) !important;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5) !important;
}

/* !!! ВИПРАВЛЕННЯ ДЛЯ СЕКЦІЇ "ЯК ЦЕ ПРАЦЮЄ" !!! */
/* Перебиваємо білий градієнт темним фоном */
body.dark-theme .modern-how-it-works {
    background: var(--dt-bg-deep) !important;
    background-image: none !important; 
}

/* Елементи при наведенні (Slate 800) */
body.dark-theme .card:hover,
body.dark-theme .event-card-horizontal:hover,
body.dark-theme .people-card:hover,
body.dark-theme .mini-event-card:hover,
body.dark-theme .process-step:hover,
body.dark-theme .chat-item:hover,
body.dark-theme .notif-item:hover,
body.dark-theme .dropdown-header {
    background-color: var(--dt-bg-elevated) !important;
    border-color: var(--dt-accent) !important;
}

/* ==========================================================================
   3. ІНПУТИ
========================================================================== */
body.dark-theme input,
body.dark-theme textarea,
body.dark-theme select,
body.dark-theme .form-control,
body.dark-theme .form-select,
body.dark-theme .form-tabs,
body.dark-theme .interest-tag,
body.dark-theme .step-arrow,
body.dark-theme .step-number,
body.dark-theme .icon-circle,
body.dark-theme .creator-chip {
    background-color: var(--dt-bg-input) !important;
    border: 1px solid var(--dt-border) !important;
}

body.dark-theme input:focus,
body.dark-theme textarea:focus,
body.dark-theme select:focus,
body.dark-theme .form-control:focus {
    border-color: var(--dt-accent) !important;
    box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.3) !important;
    background-color: var(--dt-bg-input) !important;
}

/* ==========================================================================
   4. КНОПКИ
========================================================================== */
/* Акцентні */
body.dark-theme .btn-accent,
body.dark-theme .interest-tag.selected,
body.dark-theme .tab-btn.active,
body.dark-theme .chat-message.sent {
    background: linear-gradient(135deg, var(--dt-accent), #6d28d9) !important;
    color: white !important;
    border: none !important;
    box-shadow: 0 4px 15px rgba(124, 58, 237, 0.4) !important;
}

/* Звичайні */
body.dark-theme .btn:not(.btn-accent),
body.dark-theme .chat-list-btn,
body.dark-theme .theme-toggle,
body.dark-theme .notification-bell-btn,
body.dark-theme .scroll-btn,
body.dark-theme .tab-btn,
body.dark-theme .chat-message:not(.sent) {
    background-color: var(--dt-bg-elevated) !important;
}

body.dark-theme .btn:not(.btn-accent):hover,
body.dark-theme .chat-list-btn:hover,
body.dark-theme .theme-toggle:hover,
body.dark-theme .notification-bell-btn:hover,
body.dark-theme .scroll-btn:hover {
    background-color: #334155 !important; 
    color: white !important;
    border-color: var(--dt-accent) !important;
}

/* ==========================================================================
   5. ТЕКСТ ТА ІКОНКИ
========================================================================== */
body.dark-theme p,
body.dark-theme small,
body.dark-theme .text-muted,
body.dark-theme .card-meta,
body.dark-theme label,
body.dark-theme .form-label,
body.dark-theme .hero-description,
body.dark-theme .section-subtitle,
body.dark-theme ::placeholder,
body.dark-theme .step-content p {
    color: var(--dt-text-secondary) !important;
}

/* Іконки - акцентні */
body.dark-theme i {
    color: var(--dt-accent) !important;
}
/* Іконки на акцентних кнопках - білі */
body.dark-theme .btn-accent i,
body.dark-theme .interest-tag.selected i,
body.dark-theme .step-number {
    color: white !important;
}
body.dark-theme .icon-circle i {
    color: white !important;
}

/* ==========================================================================
   6. СПЕЦИФІЧНІ ЕЛЕМЕНТИ
========================================================================== */

/* Login Background */
body.dark-theme .modern-auth-screen,
body.dark-theme .auth-hero-section {
    background: linear-gradient(135deg, var(--dt-bg-deep), var(--dt-bg-surface)) !important;
}

/* Hero Section */
body.dark-theme .modern-hero {
    background: linear-gradient(to bottom, var(--dt-bg-deep), var(--dt-bg-surface)) !important;
    border: none !important;
    background-image: none !important; /* Прибираємо бульбашки */
}

/* Тексти заголовків без градієнтів */
body.dark-theme .hero-title,
body.dark-theme .modern-section-title,
body.dark-theme .logo {
    background: none !important;
    -webkit-text-fill-color: var(--dt-text-primary) !important;
    color: var(--dt-text-primary) !important;
    text-shadow: 0 0 15px rgba(124, 58, 237, 0.4) !important;
}

/* Header */
body.dark-theme header {
    background: rgba(2, 6, 23, 0.85) !important;
    backdrop-filter: blur(10px) !important;
}
body.dark-theme header.scrolled {
    background: rgba(2, 6, 23, 0.95) !important;
}

/* Maps */
body.dark-theme .leaflet-layer,
body.dark-theme .leaflet-control-zoom-in,
body.dark-theme .leaflet-control-zoom-out,
body.dark-theme .leaflet-control-attribution {
    filter: invert(100%) hue-rotate(180deg) brightness(95%) contrast(90%) !important;
}
body.dark-theme #eventMap,
body.dark-theme #contactMap {
    background: var(--dt-bg-input) !important;
}